USRLIB=${R_PACKAGE_DIR}/usrlib
INCDIR=${R_PACKAGE_DIR}/include
PKG_CPPFLAGS=-I"${INCDIR}"
PKG_LIBS=-L"${USRLIB}" -Wl,-rpath,"${USRLIB}" -lhts -lz -pthread

all: libhts.so incdir Rhtslib.so

libhts.so:
	mkdir -p "${USRLIB}"
	cd htslib-1.7 && ./configure && $(MAKE) && cp libhts.so libhts.so.2 libhts.a "${USRLIB}"

incdir: libhts.so
	mkdir -p "${INCDIR}"
	cp -r htslib-1.7/htslib/* "${INCDIR}"

clean:
	rm Rhtslib.so R_init_Rhtslib.o
